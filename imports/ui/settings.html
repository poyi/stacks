<template name="AccountLink">
  {{#if currentUser}}
  <!-- #TODO:20 fade in user name to say hi -->
      <li><a href="/settings" class="settings">Hi {{accountName}}!</a></li>
  {{else}}
      <li><a href="/login">Login</a></li>
  {{/if}}
</template>
<template name="settings">
  <div class="navigation">
    <h1><a class="logo" href="/library">Stacks</a></h1>
    <ul class="nav-links">
      <!-- #TODO:20 fade in user name to say hi -->
        <li><a href="{{lastRoute}}" class="close-settings"><i class="fa fa-times" aria-hidden="true"></i></a></li>
    </ul>
  </div>
  <div id="settings-panel">
    <div class="notification-banner error">{{bannerMessage}}</div>
    <div class="settings-nav-panel">
      <ul class="settings-nav">
        <li id="myPreferenceLink" class="active-link">My Preferences</li>
        <li id="resetPasswordLink">Reset Password</li>
        <li><a href="#" class="logout button passive"><i class="fa fa-sign-out" aria-hidden="true"></i>Sign Out</a></li>
      </ul>
    </div>
    <div class="settings-content">
      {{#if preferencePanelVisible}}
      <div class="preferences">
        <h2>My Account</h2>
        <div class="email-info">
          <h3>My Email</h3>
          <p>{{userEmail}}</p>
        </div>
        <div class="email-info">
          <h3>User Type:</h3>
          <p>{{userRole}}</p>
        </div>
        <form id="accountInfo" method="post" class="login">
          <div class="input-row">
            <p>First Name</p><input id="firstName" value="{{firstName}}" name="firstname">
          </div>
          <div class="input-row">
            <p>Last Name</p><input id="lastName" value="{{lastName}}" name="lastname">
          </div>
          <input class="btn-submit button primary" type="submit" value="Update Profile">
        </form>
      </div>
      {{else}}
        <div class="change-password">
          <h2>Change Your Password</h2>
          <form action="/reset-password" id="changePasswordForm" method="post" class="login">
            <div class="input-row">
              <p>Current password</p><input id="oldPassword" name="password" placeholder="New Password" type="password" >
            </div>
            <div class="input-row">
              <p>New Password</p><input id="newPassword" name="password-confirm" placeholder="Confirm" type="password" >
            </div>
            <input class="btn-submit button primary" type="submit" value="Reset">
          </form>
        </div>
      {{/if}}
    </div>
  </div>
</template>
